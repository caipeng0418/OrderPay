drop table orderitem if exists
drop table payment if exists
drop table "order" if exists

create table "order"(
	id bigint generated by default as identity (start with 1) not null primary key,
	customerid varchar(256) not null,
	sellerid varchar(256) not null,
	description varchar(512),
	totalprice decimal not null,
	createtime timestamp not null,
	liveduration integer default 0,
	callbackurl varchar(512),
	state varchar(256) not null
);

create table orderitem(
	id bigint generated by default as identity (start with 1) not null primary key,
	name varchar(256) default 'Unknown',
	externalid varchar(256) not null,
	orderid bigint foreign key references "order"(id)
);

create table payment(
	id bigint generated by default as identity (start with 1) not null primary key,
	amount decimal not null,
	paytime timestamp not null,
	fromaccount varchar(256) not null,
	toaccount varchar(256) not null,
	referencetext varchar(512),
	note varchar(512),
	state varchar(256) not null,
	"type" varchar(256) not null,
	orderid bigint foreign key references "order"(id)
);
